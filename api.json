{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "description": "Retorna informa√ß√µes b√°sicas sobre a API",
        "operationId": "AppController_getInfo",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Informa√ß√µes da API",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "name": "Racha do M√™s API",
                    "version": "1.0",
                    "description": "API para gerenciamento de despesas compartilhadas",
                    "documentation": "/api/docs"
                  }
                }
              }
            }
          }
        },
        "summary": "Informa√ß√µes da API",
        "tags": ["Informa√ß√µes da API"]
      }
    },
    "/health": {
      "get": {
        "description": "Verifica se a API est√° funcionando",
        "operationId": "AppController_getHealth",
        "parameters": [],
        "responses": {
          "200": {
            "description": "API est√° funcionando",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "status": "ok",
                    "timestamp": "2025-10-11T18:00:00.000Z"
                  }
                }
              }
            }
          }
        },
        "summary": "Health check",
        "tags": ["Informa√ß√µes da API"]
      }
    },
    "/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usu√°rio registrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "user": {
                      "id": 1,
                      "name": "Jo√£o da Silva",
                      "email": "joao@email.com",
                      "phone_number": "+5511999999999"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Email j√° cadastrado"
          }
        },
        "summary": "Registrar novo usu√°rio",
        "tags": ["Autentica√ß√£o"]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login realizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "user": {
                      "id": 1,
                      "name": "Jo√£o da Silva",
                      "email": "joao@email.com",
                      "phone_number": "+5511999999999"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Credenciais inv√°lidas"
          }
        },
        "summary": "Fazer login",
        "tags": ["Autentica√ß√£o"]
      }
    },
    "/users": {
      "get": {
        "operationId": "UsersController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de usu√°rios"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar todos os usu√°rios",
        "tags": ["Usu√°rios"]
      }
    },
    "/users/{id}": {
      "get": {
        "operationId": "UsersController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usu√°rio encontrado"
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Buscar usu√°rio por ID",
        "tags": ["Usu√°rios"]
      },
      "patch": {
        "operationId": "UsersController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usu√°rio atualizado com sucesso"
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Atualizar usu√°rio",
        "tags": ["Usu√°rios"]
      },
      "delete": {
        "operationId": "UsersController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Usu√°rio removido com sucesso"
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Remover usu√°rio",
        "tags": ["Usu√°rios"]
      }
    },
    "/bills": {
      "post": {
        "description": "O usu√°rio autenticado ser√° automaticamente o dono da conta e deve estar entre os participantes",
        "operationId": "BillsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBillDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conta criada com sucesso"
          },
          "400": {
            "description": "Porcentagens inv√°lidas, usu√°rio n√£o encontrado ou dono n√£o est√° entre os participantes"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Criar nova conta",
        "tags": ["Contas"]
      },
      "get": {
        "operationId": "BillsController_findAll",
        "parameters": [
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "Filtrar contas por usu√°rio",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contas"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar todas as contas",
        "tags": ["Contas"]
      }
    },
    "/bills/my-bills/monthly": {
      "get": {
        "description": "Retorna todas as contas do usu√°rio autenticado no m√™s/ano especificado com valores, vencimentos e status de pagamento",
        "operationId": "BillsController_getMyMonthlyBills",
        "parameters": [
          {
            "name": "month",
            "required": true,
            "in": "query",
            "description": "M√™s (1-12)",
            "schema": {
              "example": 10,
              "type": "number"
            }
          },
          {
            "name": "year",
            "required": true,
            "in": "query",
            "description": "Ano",
            "schema": {
              "example": 2025,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contas do m√™s",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserMonthlyBillResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar contas do usu√°rio autenticado para um m√™s espec√≠fico",
        "tags": ["Contas"]
      }
    },
    "/bills/invites/pending": {
      "get": {
        "operationId": "BillsController_getPendingInvites",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de convites pendentes"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar convites pendentes do usu√°rio autenticado",
        "tags": ["Contas"]
      }
    },
    "/bills/{billId}/invite": {
      "patch": {
        "operationId": "BillsController_acceptInvite",
        "parameters": [
          {
            "name": "billId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptInviteDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Convite respondido com sucesso"
          },
          "400": {
            "description": "Convite j√° foi respondido anteriormente"
          },
          "404": {
            "description": "Convite n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Aceitar ou rejeitar convite de conta",
        "tags": ["Contas"]
      }
    },
    "/bills/{billId}": {
      "patch": {
        "description": "Permite atualizar a descri√ß√£o e o valor total (apenas para contas parceladas). Apenas o dono pode atualizar.",
        "operationId": "BillsController_updateBillInfo",
        "parameters": [
          {
            "name": "billId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBillInfoDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Conta atualizada com sucesso"
          },
          "400": {
            "description": "Contas recorrentes n√£o possuem valor total"
          },
          "403": {
            "description": "Apenas o dono da conta pode atualizar"
          },
          "404": {
            "description": "Conta n√£o encontrada"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Atualizar informa√ß√µes gerais da conta",
        "tags": ["Contas"]
      },
      "delete": {
        "description": "Apenas o dono da conta pode delet√°-la. Todos os dados relacionados ser√£o removidos.",
        "operationId": "BillsController_deleteBill",
        "parameters": [
          {
            "name": "billId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conta deletada com sucesso"
          },
          "403": {
            "description": "Apenas o dono da conta pode delet√°-la"
          },
          "404": {
            "description": "Conta n√£o encontrada"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Deletar uma conta",
        "tags": ["Contas"]
      }
    },
    "/bills/{billId}/values": {
      "get": {
        "description": "Retorna todos os valores (m√™s a m√™s) de uma conta espec√≠fica. Pode filtrar por m√™s e ano.",
        "operationId": "BillsController_getBillValues",
        "parameters": [
          {
            "name": "billId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "month",
            "required": false,
            "in": "query",
            "description": "Filtrar por m√™s (1-12)",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "year",
            "required": false,
            "in": "query",
            "description": "Filtrar por ano",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de valores da conta"
          },
          "404": {
            "description": "Conta n√£o encontrada"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar valores individuais de uma conta",
        "tags": ["Contas"]
      }
    },
    "/bills/{billId}/values/{month}/{year}": {
      "patch": {
        "description": "Permite atualizar o valor de uma conta em um m√™s/ano espec√≠fico. Se o bill-value n√£o existir, ele ser√° criado automaticamente. Apenas o dono pode atualizar.",
        "operationId": "BillsController_updateBillValue",
        "parameters": [
          {
            "name": "billId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "month",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "year",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateBillValueDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Valor da conta atualizado ou criado com sucesso"
          },
          "403": {
            "description": "Apenas o dono da conta pode atualizar os valores"
          },
          "404": {
            "description": "Conta n√£o encontrada"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Atualizar ou criar valor da conta para um m√™s espec√≠fico",
        "tags": ["Contas"]
      }
    },
    "/payments": {
      "post": {
        "description": "Registra um pagamento e atualiza automaticamente os saldos entre os participantes. Pode incluir foto do comprovante. Para contas recorrentes, pode criar automaticamente o bill-value se n√£o existir usando bill_id, month e year.",
        "operationId": "PaymentsController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["payment_value", "payed_at"],
                "properties": {
                  "bill_value_id": {
                    "type": "integer",
                    "example": 1,
                    "description": "ID da parcela (BillValue). Obrigat√≥rio se bill_id, month e year n√£o forem fornecidos."
                  },
                  "bill_id": {
                    "type": "integer",
                    "example": 1,
                    "description": "ID da conta. Obrigat√≥rio se bill_value_id n√£o for fornecido."
                  },
                  "month": {
                    "type": "integer",
                    "example": 10,
                    "description": "M√™s (1-12). Obrigat√≥rio se bill_value_id n√£o for fornecido."
                  },
                  "year": {
                    "type": "integer",
                    "example": 2025,
                    "description": "Ano. Obrigat√≥rio se bill_value_id n√£o for fornecido."
                  },
                  "payment_value": {
                    "type": "number",
                    "example": 750
                  },
                  "payed_at": {
                    "type": "string",
                    "example": "2025-10-11T18:00:00.000Z"
                  },
                  "receipt_photo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Foto do comprovante (opcional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Pagamento registrado com sucesso"
          },
          "400": {
            "description": "Usu√°rio n√£o participa da conta"
          },
          "404": {
            "description": "Conta n√£o encontrada"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Registrar novo pagamento",
        "tags": ["Pagamentos"]
      },
      "get": {
        "operationId": "PaymentsController_findAll",
        "parameters": [
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "Filtrar pagamentos por usu√°rio",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "billId",
            "required": false,
            "in": "query",
            "description": "Filtrar pagamentos por conta",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pagamentos"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar todos os pagamentos",
        "tags": ["Pagamentos"]
      }
    },
    "/payments/{id}": {
      "get": {
        "operationId": "PaymentsController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pagamento encontrado"
          },
          "404": {
            "description": "Pagamento n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Buscar pagamento por ID",
        "tags": ["Pagamentos"]
      },
      "put": {
        "description": "Substitui completamente os dados do pagamento. Valor e data s√£o obrigat√≥rios. Apenas o dono pode editar.",
        "operationId": "PaymentsController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["payment_value", "payed_at"],
                "properties": {
                  "payment_value": {
                    "type": "number",
                    "example": 800,
                    "description": "Valor do pagamento (obrigat√≥rio)"
                  },
                  "payed_at": {
                    "type": "string",
                    "example": "2025-10-12T18:00:00.000Z",
                    "description": "Data do pagamento (obrigat√≥rio)"
                  },
                  "remove_receipt": {
                    "type": "boolean",
                    "example": false,
                    "description": "Se true, remove a foto do comprovante (opcional, padr√£o: false)"
                  },
                  "receipt_photo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Nova foto do comprovante (opcional, substitui a anterior se existir)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pagamento atualizado com sucesso"
          },
          "400": {
            "description": "Voc√™ n√£o pode editar pagamentos de outros usu√°rios"
          },
          "404": {
            "description": "Pagamento n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Atualizar pagamento",
        "tags": ["Pagamentos"]
      },
      "delete": {
        "description": "ATEN√á√ÉO: Remover um pagamento n√£o reverte automaticamente os saldos.",
        "operationId": "PaymentsController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pagamento removido com sucesso"
          },
          "404": {
            "description": "Pagamento n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Remover pagamento",
        "tags": ["Pagamentos"]
      }
    },
    "/payments/{id}/receipt": {
      "get": {
        "description": "Retorna a foto do comprovante se existir",
        "operationId": "PaymentsController_getReceipt",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Foto do comprovante",
            "content": {
              "image/jpeg": {},
              "image/png": {},
              "image/gif": {},
              "image/webp": {}
            }
          },
          "404": {
            "description": "Comprovante n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Buscar foto do comprovante de pagamento",
        "tags": ["Pagamentos"]
      }
    },
    "/balance/me": {
      "get": {
        "description": "Retorna resumo completo de d√≠vidas e cr√©ditos do usu√°rio logado",
        "operationId": "BalanceController_getMyBalance",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Saldo do usu√°rio",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserBalanceSummaryDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obter saldo do usu√°rio autenticado",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/user/{userId}": {
      "get": {
        "description": "Retorna resumo completo de d√≠vidas e cr√©ditos de um usu√°rio",
        "operationId": "BalanceController_getUserBalance",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Saldo do usu√°rio",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserBalanceSummaryDto"
                }
              }
            }
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obter saldo de um usu√°rio espec√≠fico",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/all": {
      "get": {
        "description": "Lista todas as rela√ß√µes de d√©bito/cr√©dito entre usu√°rios",
        "operationId": "BalanceController_getAllBalances",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de saldos"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obter todos os saldos",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/history": {
      "get": {
        "description": "Lista hist√≥rico de todas as transa√ß√µes que geraram saldos",
        "operationId": "BalanceController_getHistory",
        "parameters": [
          {
            "name": "userId",
            "required": false,
            "in": "query",
            "description": "Filtrar hist√≥rico por usu√°rio",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Hist√≥rico de transa√ß√µes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/HistoryResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Obter hist√≥rico de transa√ß√µes",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/charge-message/me": {
      "get": {
        "description": "Gera uma mensagem formatada para WhatsApp/Email com as d√≠vidas pendentes",
        "operationId": "BalanceController_getMyChargeMessage",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Mensagem de cobran√ßa gerada",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "message": "üí∞ *Resumo de Contas - Racha do M√™s*\n\nOl√°! Aqui est√° um resumo das suas contas:\n\n‚Ä¢ Voc√™ deve *R$ 750.00* para Maria Santos\n\nüìä *Total a pagar: R$ 750.00*\n\nPor favor, realize o pagamento o mais breve poss√≠vel. Obrigado! üòä"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Gerar mensagem de cobran√ßa para o usu√°rio autenticado",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/charge-message/{userId}": {
      "get": {
        "description": "Gera uma mensagem formatada para WhatsApp/Email com as d√≠vidas pendentes de um usu√°rio espec√≠fico",
        "operationId": "BalanceController_getChargeMessage",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mensagem de cobran√ßa gerada"
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Gerar mensagem de cobran√ßa para um usu√°rio",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/me/debts": {
      "get": {
        "description": "Retorna lista de pessoas para quem o usu√°rio autenticado deve dinheiro, com o valor total de cada d√≠vida",
        "operationId": "BalanceController_getMyDebts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de pessoas que voc√™ deve",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DebtSummaryDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar pessoas que eu devo",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/me/debts/{creditorId}": {
      "get": {
        "description": "Retorna detalhamento completo da d√≠vida do usu√°rio autenticado com uma pessoa espec√≠fica, incluindo hist√≥rico de transa√ß√µes",
        "operationId": "BalanceController_getMyDebtDetail",
        "parameters": [
          {
            "name": "creditorId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhamento da d√≠vida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DebtDetailDto"
                }
              }
            }
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado ou d√≠vida n√£o existe"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Detalhar d√≠vida com uma pessoa espec√≠fica",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/me/credits": {
      "get": {
        "description": "Retorna lista de pessoas que devem dinheiro ao usu√°rio autenticado, com o valor total de cada cr√©dito",
        "operationId": "BalanceController_getMyCredits",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lista de pessoas que te devem",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CreditSummaryDto"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Listar pessoas que me devem",
        "tags": ["Saldos e Hist√≥rico"]
      }
    },
    "/balance/me/credits/{debtorId}": {
      "get": {
        "description": "Retorna detalhamento completo do que uma pessoa espec√≠fica deve ao usu√°rio autenticado, incluindo hist√≥rico de transa√ß√µes",
        "operationId": "BalanceController_getMyCreditDetail",
        "parameters": [
          {
            "name": "debtorId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhamento do cr√©dito",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DebtDetailDto"
                }
              }
            }
          },
          "404": {
            "description": "Usu√°rio n√£o encontrado ou d√≠vida n√£o existe"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Detalhar o que uma pessoa me deve",
        "tags": ["Saldos e Hist√≥rico"]
      }
    }
  },
  "info": {
    "title": "Racha do M√™s API",
    "description": "API para gerenciamento de despesas compartilhadas. Permite criar contas, registrar pagamentos, calcular saldos e gerar cobran√ßas automatizadas.",
    "version": "1.0",
    "contact": {
      "name": "Jo√£o Lu√≠s Rosa de Moura",
      "url": "https://github.com/Joaolrm",
      "email": "jlluismr86@gmail.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "tags": [
    {
      "name": "Autentica√ß√£o",
      "description": "Endpoints de registro e login"
    },
    {
      "name": "Usu√°rios",
      "description": "Gerenciamento de usu√°rios"
    },
    {
      "name": "Contas",
      "description": "Gerenciamento de contas fixas e recorrentes"
    },
    {
      "name": "Pagamentos",
      "description": "Registro e consulta de pagamentos"
    },
    {
      "name": "Saldos e Hist√≥rico",
      "description": "Consulta de saldos e hist√≥rico de transa√ß√µes"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Servidor Local"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "RegisterDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nome completo do usu√°rio",
            "example": "Jo√£o da Silva",
            "maxLength": 120
          },
          "email": {
            "type": "string",
            "description": "Email do usu√°rio (opcional)",
            "example": "joao@email.com"
          },
          "phone_number": {
            "type": "string",
            "description": "N√∫mero de telefone do usu√°rio (opcional)",
            "example": "+5511999999999"
          },
          "password": {
            "type": "string",
            "description": "Senha do usu√°rio",
            "example": "senha123",
            "minLength": 6
          }
        },
        "required": ["name", "password"]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "emailOrPhone": {
            "type": "string",
            "description": "Email ou telefone do usu√°rio",
            "example": "joao@email.com"
          },
          "password": {
            "type": "string",
            "description": "Senha do usu√°rio",
            "example": "senha123"
          }
        },
        "required": ["emailOrPhone", "password"]
      },
      "UpdateUserDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nome completo do usu√°rio",
            "example": "Maria Santos",
            "maxLength": 120
          },
          "email": {
            "type": "string",
            "description": "Email do usu√°rio (opcional)",
            "example": "maria@email.com"
          },
          "phone_number": {
            "type": "string",
            "description": "N√∫mero de telefone do usu√°rio (opcional)",
            "example": "+5511888888888"
          }
        }
      },
      "ParticipantDto": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "number",
            "description": "ID do usu√°rio participante",
            "example": 1
          },
          "share_percentage": {
            "type": "number",
            "description": "Porcentagem de participa√ß√£o (0-100)",
            "example": 50,
            "minimum": 0,
            "maximum": 100
          }
        },
        "required": ["user_id", "share_percentage"]
      },
      "CreateBillDto": {
        "type": "object",
        "properties": {
          "descript": {
            "type": "string",
            "description": "Descri√ß√£o da conta",
            "example": "Aluguel do apartamento"
          },
          "type": {
            "type": "string",
            "description": "Tipo da conta",
            "enum": ["recorrente", "parcelada"],
            "example": "recorrente"
          },
          "due_day": {
            "type": "number",
            "description": "Dia do m√™s de vencimento (1-31)",
            "example": 15,
            "minimum": 1,
            "maximum": 31
          },
          "total_value": {
            "type": "number",
            "description": "Valor total da conta (obrigat√≥rio apenas para contas parceladas)",
            "example": 1500
          },
          "installments": {
            "type": "number",
            "description": "N√∫mero de parcelas (obrigat√≥rio apenas para contas parceladas)",
            "example": 12
          },
          "start_month": {
            "type": "number",
            "description": "M√™s de in√≠cio (1-12, obrigat√≥rio apenas para contas parceladas)",
            "example": 10
          },
          "start_year": {
            "type": "number",
            "description": "Ano de in√≠cio (obrigat√≥rio apenas para contas parceladas)",
            "example": 2025
          },
          "current_month_value": {
            "type": "number",
            "description": "Valor mensal (obrigat√≥rio apenas para contas recorrentes no m√™s atual)",
            "example": 150
          },
          "participants": {
            "description": "Lista de participantes da conta",
            "example": [
              {
                "user_id": 1,
                "share_percentage": 50
              },
              {
                "user_id": 2,
                "share_percentage": 50
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ParticipantDto"
            }
          }
        },
        "required": ["descript", "type", "due_day", "participants"]
      },
      "UserMonthlyBillResponseDto": {
        "type": "object",
        "properties": {
          "bill_id": {
            "type": "number",
            "description": "ID da conta",
            "example": 1
          },
          "descript": {
            "type": "string",
            "description": "Descri√ß√£o da conta",
            "example": "Aluguel do apartamento"
          },
          "type": {
            "type": "string",
            "description": "Tipo da conta",
            "enum": ["recorrente", "parcelada"],
            "example": "recorrente"
          },
          "installment_number": {
            "type": "number",
            "description": "N√∫mero da parcela atual (apenas para contas parceladas, null para recorrentes)",
            "example": 1,
            "nullable": true
          },
          "total_installments": {
            "type": "number",
            "description": "Total de parcelas (apenas para contas parceladas, null para recorrentes)",
            "example": 10,
            "nullable": true
          },
          "installment_info": {
            "type": "string",
            "description": "Parcela formatada (exemplo: \"1/10\", apenas para contas parceladas)",
            "example": "1/10",
            "nullable": true
          },
          "due_date": {
            "format": "date-time",
            "type": "string",
            "description": "Data de vencimento",
            "example": "2025-10-15T00:00:00.000Z"
          },
          "value": {
            "type": "number",
            "description": "Valor da conta no m√™s especificado",
            "example": 150
          },
          "is_paid": {
            "type": "boolean",
            "description": "Se o usu√°rio j√° pagou sua parte",
            "example": false
          },
          "share_percentage": {
            "type": "number",
            "description": "Porcentagem de participa√ß√£o do usu√°rio na conta",
            "example": 50
          },
          "user_value": {
            "type": "number",
            "description": "Valor que o usu√°rio deve pagar (value * share_percentage / 100)",
            "example": 75
          }
        },
        "required": [
          "bill_id",
          "descript",
          "type",
          "due_date",
          "value",
          "is_paid",
          "share_percentage",
          "user_value"
        ]
      },
      "AcceptInviteDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Status do convite",
            "enum": ["accepted", "rejected"],
            "example": "accepted"
          }
        },
        "required": ["status"]
      },
      "UpdateBillInfoDto": {
        "type": "object",
        "properties": {
          "descript": {
            "type": "string",
            "description": "Nova descri√ß√£o da conta",
            "example": "Aluguel do apartamento - Centro"
          },
          "total_value": {
            "type": "number",
            "description": "Novo valor total da conta (apenas para contas parceladas). N√£o altera os valores individuais j√° criados.",
            "example": 1800
          }
        }
      },
      "UpdateBillValueDto": {
        "type": "object",
        "properties": {
          "value": {
            "type": "number",
            "description": "Novo valor da conta para o m√™s especificado",
            "example": 180
          }
        },
        "required": ["value"]
      },
      "BalanceResponseDto": {
        "type": "object",
        "properties": {
          "debtor_user_id": {
            "type": "number",
            "description": "ID do usu√°rio devedor",
            "example": 1
          },
          "debtor_name": {
            "type": "string",
            "description": "Nome do usu√°rio devedor",
            "example": "Jo√£o da Silva"
          },
          "borrower_user_id": {
            "type": "number",
            "description": "ID do usu√°rio credor",
            "example": 2
          },
          "borrower_name": {
            "type": "string",
            "description": "Nome do usu√°rio credor",
            "example": "Maria Santos"
          },
          "value": {
            "type": "number",
            "description": "Valor da d√≠vida",
            "example": 750
          }
        },
        "required": [
          "debtor_user_id",
          "debtor_name",
          "borrower_user_id",
          "borrower_name",
          "value"
        ]
      },
      "UserBalanceSummaryDto": {
        "type": "object",
        "properties": {
          "total_debts": {
            "type": "number",
            "description": "Total que o usu√°rio deve",
            "example": 1500
          },
          "total_credits": {
            "type": "number",
            "description": "Total que devem ao usu√°rio",
            "example": 750
          },
          "net_balance": {
            "type": "number",
            "description": "Saldo l√≠quido (negativo = deve, positivo = a receber)",
            "example": -750
          },
          "debts": {
            "description": "D√≠vidas individuais",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BalanceResponseDto"
            }
          },
          "credits": {
            "description": "Cr√©ditos individuais",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BalanceResponseDto"
            }
          }
        },
        "required": [
          "total_debts",
          "total_credits",
          "net_balance",
          "debts",
          "credits"
        ]
      },
      "HistoryResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "ID do hist√≥rico",
            "example": 1
          },
          "debtor_user_id": {
            "type": "number",
            "description": "ID do usu√°rio devedor",
            "example": 1
          },
          "debtor_name": {
            "type": "string",
            "description": "Nome do usu√°rio devedor",
            "example": "Jo√£o da Silva"
          },
          "borrower_user_id": {
            "type": "number",
            "description": "ID do usu√°rio credor",
            "example": 2
          },
          "borrower_name": {
            "type": "string",
            "description": "Nome do usu√°rio credor",
            "example": "Maria Santos"
          },
          "bill_id": {
            "type": "number",
            "description": "ID da conta relacionada (opcional)",
            "example": 1
          },
          "descript": {
            "type": "string",
            "description": "Descri√ß√£o da transa√ß√£o",
            "example": "Pagamento de aluguel - Outubro/2025"
          },
          "value": {
            "type": "number",
            "description": "Valor da transa√ß√£o",
            "example": 750
          },
          "created_at": {
            "format": "date-time",
            "type": "string",
            "description": "Data da transa√ß√£o",
            "example": "2025-10-11T18:00:00.000Z"
          }
        },
        "required": [
          "id",
          "debtor_user_id",
          "debtor_name",
          "borrower_user_id",
          "borrower_name",
          "descript",
          "value",
          "created_at"
        ]
      },
      "DebtSummaryDto": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "number",
            "description": "ID do usu√°rio para quem voc√™ deve",
            "example": 2
          },
          "user_name": {
            "type": "string",
            "description": "Nome do usu√°rio para quem voc√™ deve",
            "example": "Maria Santos"
          },
          "total_value": {
            "type": "number",
            "description": "Valor total que voc√™ deve para esta pessoa",
            "example": 750
          }
        },
        "required": ["user_id", "user_name", "total_value"]
      },
      "DebtDetailItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "ID do hist√≥rico",
            "example": 1
          },
          "bill_id": {
            "type": "number",
            "description": "ID da conta relacionada",
            "example": 5,
            "nullable": true
          },
          "descript": {
            "type": "string",
            "description": "Descri√ß√£o da transa√ß√£o",
            "example": "Pagamento de Aluguel (10/2025)"
          },
          "value": {
            "type": "number",
            "description": "Valor da transa√ß√£o",
            "example": 250
          },
          "created_at": {
            "format": "date-time",
            "type": "string",
            "description": "Data da transa√ß√£o",
            "example": "2025-10-15T10:30:00.000Z"
          }
        },
        "required": ["id", "bill_id", "descript", "value", "created_at"]
      },
      "DebtDetailDto": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "number",
            "description": "ID do outro usu√°rio",
            "example": 2
          },
          "user_name": {
            "type": "string",
            "description": "Nome do outro usu√°rio",
            "example": "Maria Santos"
          },
          "total_value": {
            "type": "number",
            "description": "Valor total da d√≠vida",
            "example": 750
          },
          "history": {
            "description": "Hist√≥rico detalhado das transa√ß√µes",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DebtDetailItemDto"
            }
          }
        },
        "required": ["user_id", "user_name", "total_value", "history"]
      },
      "CreditSummaryDto": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "number",
            "description": "ID do usu√°rio que te deve",
            "example": 3
          },
          "user_name": {
            "type": "string",
            "description": "Nome do usu√°rio que te deve",
            "example": "Jo√£o da Silva"
          },
          "total_value": {
            "type": "number",
            "description": "Valor total que esta pessoa te deve",
            "example": 500
          }
        },
        "required": ["user_id", "user_name", "total_value"]
      }
    }
  }
}
